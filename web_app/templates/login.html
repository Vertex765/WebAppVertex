
<!DOCTYPE html>
<html lang="pt-BR">
  {% load static %}
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="{% static 'manifest.json' %}">
<meta name="theme-color" content="#000000">
   <link rel="icon" href="{% static 'midias/icone.png' %}" type="image/png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">


  <title>Login</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f2f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

 .login-container {
  align-items: center;
  position: absolute;
  animation: zoomIn 2s ease-in-out;
  height: auto;
  width: 80%;
  max-width: 600px;
  text-align: center;
}

@keyframes zoomIn {
  0% {
    opacity: 0;
    transform: scale(0.5);
    filter: blur(20px); 
  }
  50% {
    opacity: 0.5;
    transform: scale(1.05);
    filter: blur(10px); 
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(0); 
  }
}


    input {
      display: block;
      width: 100%;
      margin: 15px 0;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    #loadings {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px;
      width: 100%;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    #loadings:hover {
      background-color: #45a049;
    }

    #error-message {
      color: rgb(0, 0, 0);
      margin-top: 10px;
    }
    .logo {
  width: 200px;       /* ou 80px, 120px — ajuste como quiser */
  height: auto;
  margin-bottom: 15px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.flip {
  transform-style: preserve-3d;
   height: 100%;
  width: 100%;
  transition: 1s;
}
.frente, .tras {
  height: 100%;
  width: 100%;
  
   position: relative;
      backface-visibility: hidden;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    
}
.frente {
  left: 50%;
  transform: translateX(-50%);
background-color: white;
overflow: hidden;
}

@media (max-width: 769px) {
.frente::before {
  content: "";
  position: absolute;
  top: -10px;
  left: 0;
  width: 100px;
  height: 100px;
  background: #4CAF50;
  border-radius: 10%;
  animation: orbit 6s alternate infinite;
  filter: blur(20px);
}

.frente::after {
  content: "";
  position: absolute;
  top: -10px;
  left: 0;
  width: 100px;
  height: 100px;
  background: #4CAF50; /* cor diferente só p/ ver */
  border-radius: 10%;
  animation: orbitReverse 6s alternate infinite;
  filter: blur(20px);
}

}
@media (min-width: 769px) {
 .frente::before {
  content: "";
  position: absolute;
  top: -10px;
  left: 0;
  width: 100px;
  height: 100px;
  background: #4CAF50;
  border-radius: 10%;
  animation: orbits 6s alternate infinite;
  filter: blur(20px);
} 
.frente::after {
  filter: blur(20px);
  content: "";
  position: absolute;
  top: -10px;
  left: 0;
  width: 100px;
  height: 100px;
  background: #4CAF50;
  border-radius: 10%;
    animation: orbitReverses 6s alternate infinite;

} 
}
@keyframes orbits {
  0%   { top: -90px; left: -20%; }
  25%  { top: -90px; left: 113%; transform: translateX(-100%); }
  50%  { top: 120%; left: 113%; transform: translate(-100%, -100%); }
  75%  { top: 120%; left: -13%; transform: translateY(-100%); }
  100% { top: -90px; left: -13%; }
  
}
/* animação da bolinha */
@keyframes orbit {
  0%   { top: -95px; left: -50%; }
  25%  { top: -95px; left: 125%; transform: translateX(-100%); }
  50%  { top: 122%; left: 125%; transform: translate(-100%, -100%); }
  75%  { top: 122%; left: -25%; transform: translateY(-100%); }
  100% { top: -40px; left: -25%; }
}
@keyframes orbitReverse {
  0%   { top: 122%; left: 120%; transform: translate(-100%, -100%); } /* começa oposto ao 0% do orbit */
  25%  { top: 122%; left: -25%; transform: translateY(-100%); }       /* oposto ao 25% */
  50%  { top: -25px; left: -25%; }                                    /* oposto ao 50% */
    75%  { top: -60px; left: 98%; }      /* oposto ao 75% */
   100% { top: 115%; left: 98%; } /* fecha ciclo */
}
@keyframes orbitReverses {
  0%   { top: 122%; left: 120%; transform: translate(-100%, -100%); } /* começa oposto ao 0% do orbit */
  25%  { top: 122%; left: -13%; transform: translateY(-100%); }       /* oposto ao 25% */
  50%  { top: -40px; left: -13%; }                                    /* oposto ao 50% */
    75%  { top: -55px; left: 98%; }      /* oposto ao 75% */
   100% { top: 115%; left: 98%; } /* fecha ciclo */
}


.tras {
  
  margin-top: 10%;
   height: auto;
  position: absolute;
top: 50%;
  left: 50%;
  align-items: center;
  background-color: #45a049;
  transform: rotateY(180deg) translatey(-50%) translateX(50%);
}

.login-container.ativo .flip {
  transform: rotateY(180deg);
}

 input {
        width: 92%; 
    margin: 15px auto; 
     
      display: block;
     
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    #loading {
      background-color: #ffffff;
      color: #45a049;
      border: none;
      padding: 10px;
      width: 50%;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    #loading:hover {
      background-color: #45a049;
      color: #ffffff;
    }

    #error-message {
      color: rgb(0, 0, 0);
      margin-top: 10px;
    }
    .logo {
  width: 200px;       /* ou 80px, 120px — ajuste como quiser */
  height: auto;
  margin-bottom: 15px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.modal {
  display: none; /* Começa oculto */
  position: fixed;
  z-index: 999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
  animation: modal 1s ;
}
@keyframes modal {
 from {
    filter: blur(20px);
    top: 100%;
  }
}
.modal::after.ativo {
  animation: modal 1s reverse ;
}

/* Caixa do conteúdo */
.modal-content {
  background: white;
  padding: 0;
  border-radius: 8px;
  max-width: 90%;
  max-height: 80%;
  overflow: auto;
  display: flex;
  justify-content: center; /* centraliza horizontalmente */
  align-items: center;     /* centraliza verticalmente */
}

.modal-content video {
  height: auto;
  display: block;
  width: 100%;
  object-fit: contain;
}

.close-btn {
  position: absolute;
  top: 15px;
  right: 20px;
  color: white;
  font-size: 28px;
  cursor: pointer;
}

 #loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  color: white;
  font-family: Arial, sans-serif;
}

.spinner {
  display: flex;
  gap: 5px;
}

.spinner span {
  width: 12px;
  height: 12px;
  background: #45a049;
  border-radius: 50%;
  animation: bounce 0.5s infinite alternate;
}

.spinner span:nth-child(2) { animation-delay: 0.2s; }
.spinner span:nth-child(3) { animation-delay: 0.4s; }

@keyframes bounce {
  to { transform: translateY(-8px); }
}



/* Container */
.checkbox-container {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Label estilizada */
.checkbox-label {
  position: relative;
  padding-left: 28px;
  cursor: pointer;
  font-size: 15px;
  color: #ffffff;
  user-select: none;
  display: flex;
  align-items: flex-end; /* deixa o texto mais embaixo */
  line-height: 25px;     /* controla a altura da linha */
}

/* Esconde o checkbox padrão */
.checkbox-label input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

/* Checkmark customizado */
.checkmark {
  position: absolute;
  left: 0;
  top: 2px;
  height: 18px;
  width: 18px;
  background-color: #f0f0f0;
  border-radius: 4px;
  border: 2px solid #ccc;
  transition: all 0.2s ease;
}

/* Quando marcado */
.checkbox-label input:checked ~ .checkmark {
  background-color: #4CAF50;
  border-color: #4CAF50;
}

/* Desenho do "✔" */
.checkmark::after {
  content: "";
  position: absolute;
  display: none;
  left: 5px;
  top: 1px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* Mostra o ✔ quando marcado */
.checkbox-label input:checked ~ .checkmark::after {
  display: block;
}


  </style>
  
</head>
<script>




if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register("{% static 'js/service-worker.js' %}")
        .then(() => console.log('Service Worker registrado!'))
        .catch(err => console.error('Erro no SW:', err));
}

</script>

<body >




  <div class="login-container"  >
 <div id="loading-overlay" style="display:none;">
  <div class="spinner">
    <span></span><span></span><span></span>
  </div>
  <p>Aguarde...</p>
</div>

<div  class="flip">

    <div class="frente">
    <img src="{% static 'midias/logo.png' %}" alt="Logo" class="logo">

    <h2 id="minhaLabel" style=" font-family: EB Garamond, serif;
  font-optical-sizing: auto;
  font-style: normal;  color: #000000;" ></h2>
    <form onsubmit="return handleLogin(event)" >
      <input type="email" id="gmails" placeholder="Digite seu Gmail" required />
      <input type="password" id="cpfs" placeholder="Digite seu CPF" required maxlength="14" />
      <button type="submit" id="loadings">Entrar</button>
    </form>
  <p id="btnFlip" style="cursor:pointer; color:rgb(0, 0, 0); user-select: none;">
 Realizar meu Cadastro
</p>
    <p id="error-message"></p>
</div>

<div class="tras">
 <div class="modal" id="videoModal">
  <span class="close-btn" id="closeModal">&times;</span>
  <div class="modal-content">
    <img src="{% static 'midias/TERMO.png' %}" alt="Termos" style="width: 100%; height: auto; margin-top: auto; max-height: 900px;">
  </div>
</div>
    <img src="{% static 'midias/logovs.png' %}" alt="Logo" class="logo">

    <h2 style="color: #ffffff;" >Cadastro</h2>
    <form onsubmit="return handleLoginS(event)">
       <input type="text" id="nome" placeholder="Nome completo" required /> 
      <input type="email" id="gmail" placeholder="Gmail" required />
      <input type="text" id="cpf" placeholder="CPF" maxlength="14" required />
      <input type="text" id="telefone" placeholder="Telefone" maxlength="15" required/>
      <input type="text" id="rg" placeholder="RG" required/>
      <input type="text" id="dt" placeholder="Data de Nascimento" maxlength="10" required/>
      <input type="text" id="mae" placeholder="Nome completo da Mãe" required/>
      <input type="text" id="pix" placeholder="Chave Pix" required/>


     <div class="checkbox-container">
  <label class="checkbox-label">
    <input type="checkbox" required />
    <span class="checkmark"></span>
    Aceitar termos
  </label>
</div>
 <p onclick="load()" style="cursor:pointer; color:rgb(255, 255, 255); user-select: none;">
 Visualizar Termos
</p>
      <button id="loading">Finalizar Cadastro</button>
    </form>
    <p id="error-messages"></p>
  </div>

 
</div>



  </div>

  <script>
    sessionStorage.setItem("token","AKfycbxagBA8keaERSmboN7Lk7DBepLfufKyCqxdd1_3TMfl34hB2HnSoZ-30w6xk__aOo-0")


const urlParams = new URLSearchParams(window.location.search);
const codigoIndicacao = urlParams.get("codigo");

let codigode
if (codigoIndicacao) {
  codigode = codigoIndicacao;
 document.querySelector(".login-container").classList.toggle("ativo"); 
}


   // Mostra o modal assim que entrar na página
function load() {
  document.getElementById("videoModal").style.display = "flex";
};

// Fecha o modal ao clicar no X
document.getElementById("closeModal").onclick = function() {
  document.getElementById("videoModal").style.display = "none";
};
let Buscando = ""
async function handleLoginS(event) {
   mostrarLoading()
Buscando = "Analisando Dados Aguarde..."
    document.getElementById("loading").innerText = Buscando;

    event.preventDefault();
    const gmail = document.getElementById("gmail").value.trim();
    const cpf = document.getElementById("cpf").value.trim();
    const errorMessage = document.getElementById("error-message");
    errorMessage.textContent = "";
if (!validateLogin(gmail, cpf)) {
    errorMessage.textContent = "Gmail ou CPF inválido.";
    Buscando = "Tentar Novamente"
    document.getElementById("loading").innerText = Buscando;
    esconderLoading()
    return false; // Encerra a função
}   

    sessionStorage.setItem("gmail", gmail);
    sessionStorage.setItem("cpf",cpf.replace(/\D/g, ""));

    try {
        const token = sessionStorage.getItem("token")
        const url = `https://script.google.com/macros/s/${encodeURIComponent(token)}/exec?action=Login&cpf=${encodeURIComponent(cpf)}&email=${encodeURIComponent(gmail)}`;
        const res = await fetch(url);
        const data = await res.json();
        
        if (!res.ok) {
    throw new Error(data.message || "Erro na API");
}
function capitalizarNome(nome) {
  const palavrasMenores = ['de', 'da', 'das', 'do', 'dos', 'e'];
  
  return nome.toLowerCase().split(' ').map((palavra, index) => {
    if (index > 0 && palavrasMenores.includes(palavra)) {
      return palavra;
    }
    return palavra.charAt(0).toUpperCase() + palavra.slice(1);
  }).join(' ');
}
const nomecapitalizaddo = capitalizarNome(document.getElementById("nome").value.trim())
if (data.existe) {
   errorMessages.textContent = "Parceiro já possui cadastro, faça login";
     document.getElementById("loading").innerText = "Parceiro já possui cadastro, faça login";
     esconderLoading()
    
} else {
    
    const dados = {
    action: "CADASTRO",
    termos: "Aceito",
    email: document.getElementById("gmail").value.trim(),
    nome: nomecapitalizaddo,
    nomemae:  document.getElementById("mae").value.trim(),
    dtnascimento: document.getElementById("dt").value.trim(),
    rg:  document.getElementById("rg").value.trim(),
    cpf: "'" + document.getElementById("cpf").value.trim().replace(/\D/g, ""),
    telefone:  document.getElementById("telefone").value.trim(),
    pix:  document.getElementById("pix").value.trim(),
    codlider: "",
    jatrabalha: "Não",
    obs: "",
    codindica:  codigode
  };
  let Buscando = ""
   Buscando = "Criando conta..."
    document.getElementById("loading").innerText = Buscando;
    await enviarCadastro(dados);
    Buscando = "Seja bem vindo ao time Vertex"
    document.getElementById("loading").innerText = Buscando;
    esconderLoading()
    async function enviarCadastro(dados) {
 

  try {
    const token = sessionStorage.getItem("token")
    const response = await fetch(`https://script.google.com/macros/s/${encodeURIComponent(token)}/exec`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
       body: JSON.stringify(dados),
      mode: 'no-cors', // <- ALTERADO AQUI
      redirect: 'follow',
      credentials: 'omit'
    });

    const resultado = await response.text();
    console.log("Resposta da API:", resultado);
    alert("Cadastro realizado com sucesso!, Enviamos um email para você");
    window.location.href = "{% url 'voltar' %}";
  } catch (error) {
     esconderLoading()
    console.error("Erro:", error);
    alert("Falha ao enviar cadastro.");
  }
}

    
}
                  
    } catch (err) {
     document.getElementById("loading").innerText = "Tentar Novamente";
        errorMessage.textContent = "Erro ao conectar com o servidor.";
         esconderLoading()
    }
    return false;
  
     
}


    function validateLogin(gmail, cpf) {
      const gmailValido = gmail.endsWith(".com");
      const cpfValido = cpf.replace(/\D/g, "").length === 11;
      return gmailValido && cpfValido;
    }
document.getElementById('dt').addEventListener('input', function(e) {
  // Remove tudo que não é número
  let value = e.target.value.replace(/\D/g, '');
  
  // Aplica a máscara
  if (value.length > 4) {
    value = value.replace(/^(\d{2})(\d{2})(\d{0,4})/, '$1/$2/$3');
  } else if (value.length > 2) {
    value = value.replace(/^(\d{2})(\d{0,2})/, '$1/$2');
  }
  
  // Atualiza o valor do campo
  e.target.value = value;
  
  // Validação básica (opcional)
  validateDate(e.target);
});

function validateDate(input) {
  const value = input.value;
  const errorStyle = 'border: 1px solid red';
  const validStyle = 'border: 1px solid #ccc';
  
  // Verifica o formato básico
  if (!/^\d{2}\/\d{2}\/\d{4}$/.test(value)) {
    input.style = errorStyle;
    return false;
  }
  
  // Extrai dia, mês e ano
  const [day, month, year] = value.split('/').map(Number);
  
  // Validações básicas
  const currentYear = new Date().getFullYear();
  if (month < 1 || month > 12) {
    input.style = errorStyle;
    return false;
  }
  
  if (day < 1 || day > 31) {
    input.style = errorStyle;
    return false;
  }
  
  if (year < 1900 || year > currentYear) {
    input.style = errorStyle;
    return false;
  }
  
  // Valida meses com 30 dias
  if ([4, 6, 9, 11].includes(month) && day > 30) {
    input.style = errorStyle;
    return false;
  }
  
  // Valida fevereiro (considerando ano bissexto)
  if (month === 2) {
    const isLeapYear = (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
    if (day > (isLeapYear ? 29 : 28)) {
      input.style = errorStyle;
      return false;
    }
  }
  
  input.style = validStyle;
  return true;
}
// Validação de e-mail
document.getElementById('gmail').addEventListener('blur', function(e) {
  const email = e.target.value.trim();
const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
  
  if (!emailRegex.test(email)) {
    e.target.style.borderColor = 'red';
    document.getElementById('error-message').textContent = 'Por favor, insira um e-mail válido';
  } else {
    e.target.style.borderColor = '#ccc';
    document.getElementById('error-message').textContent = '';
  }
});
// Máscara e validação de CPF
document.getElementById('cpf').addEventListener('input', function(e) {
  let value = e.target.value.replace(/\D/g, '');
  
  // Aplica máscara
  if (value.length > 9) {
    value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
  } else if (value.length > 6) {
    value = value.replace(/(\d{3})(\d{3})(\d{1,3})/, '$1.$2.$3');
  } else if (value.length > 3) {
    value = value.replace(/(\d{3})(\d{1,3})/, '$1.$2');
  }
  
  e.target.value = value;
  
  // Validação básica
  if (value.length === 14) { // CPF completo com máscara
    if (!validarCPF(value)) {
      e.target.style.borderColor = 'red';
      document.getElementById('error-message').textContent = 'CPF inválido';
    } else {
      e.target.style.borderColor = '#ccc';
      document.getElementById('error-message').textContent = '';
    }
  }
});

// Função para validar CPF
function validarCPF(cpf) {
  cpf = cpf.replace(/\D/g, '');
  
  if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) return false;
  
  // Cálculo dos dígitos verificadores
  let soma = 0;
  for (let i = 0; i < 9; i++) {
    soma += parseInt(cpf.charAt(i)) * (10 - i);
  }
  let resto = (soma * 10) % 11;
  if (resto === 10 || resto === 11) resto = 0;
  if (resto !== parseInt(cpf.charAt(9))) return false;
  
  soma = 0;
  for (let i = 0; i < 10; i++) {
    soma += parseInt(cpf.charAt(i)) * (11 - i);
  }
  resto = (soma * 10) % 11;
  if (resto === 10 || resto === 11) resto = 0;
  if (resto !== parseInt(cpf.charAt(10))) return false;
  
  return true;
}
// Máscara e validação de telefone
document.getElementById('telefone').addEventListener('input', function(e) {
  let value = e.target.value.replace(/\D/g, '');
  
  // Aplica máscara
  if (value.length > 10) {
    value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
  } else if (value.length > 6) {
    value = value.replace(/(\d{2})(\d{4})(\d{0,4})/, '($1) $2-$3');
  } else if (value.length > 2) {
    value = value.replace(/(\d{2})(\d{0,5})/, '($1) $2');
  } else if (value.length > 0) {
    value = value.replace(/^(\d*)/, '($1');
  }
  
  e.target.value = value;
  
  // Validação básica
  if (value.length === 15) { // Telefone completo com máscara
    e.target.style.borderColor = '#ccc';
    document.getElementById('error-message').textContent = '';
  } else if (value.length > 0) {
    e.target.style.borderColor = 'red';
    document.getElementById('error-message').textContent = 'Telefone incompleto';
  }
});



  function mostrarLoading() {
  document.getElementById("loading-overlay").style.display = "flex";
}

function esconderLoading() {
  document.getElementById("loading-overlay").style.display = "none";
}




document.getElementById("btnFlip").addEventListener("click", function() {
  document.querySelector(".login-container").classList.toggle("ativo");
});


function digitarTextoUltimaFixa(elemento, textos, velocidade, pausa) {
    let textoIndex = 0;
    let letraIndex = 0;
    let apagando = false;

    // Pega a última letra fixa do primeiro texto (pode ser ponto, exclamação, etc.)
    const ultimaLetra = textos[0].slice(-1);

    function animar() {
        const textoAtual = textos[textoIndex].slice(0, -1); // sem a última letra

        if (!apagando) {
            // Digitando o resto
            elemento.textContent = textoAtual.substring(0, letraIndex + 1) + ultimaLetra;
            letraIndex++;

            if (letraIndex === textoAtual.length) {
                apagando = true;
                setTimeout(animar, pausa);
                return;
            }
        } else {
            // Apagando sem apagar a última letra
            elemento.textContent = textoAtual.substring(0, letraIndex - 1) + ultimaLetra;
            letraIndex--;

            if (letraIndex === 0) {
                apagando = false;
                textoIndex = (textoIndex + 1) % textos.length;
            }
        }

        setTimeout(animar, velocidade);
    }

    animar();
}

const label = document.getElementById("minhaLabel");

digitarTextoUltimaFixa(label, ["Bem-vinda|", "Conecte-se!"], 50, 3000);

  
  


async function handleLogin(event) {
    
    let btnloading = "Carregando"
    document.getElementById("loadings").innerText = btnloading;

    event.preventDefault();
    const gmail = document.getElementById("gmails").value.trim();
    const cpf = document.getElementById("cpfs").value.trim();
    const errorMessage = document.getElementById("error-message");
    
if (!validateLogin(gmail, cpf)) {
    errorMessage.textContent = "Gmail ou CPF inválido.";
     btnloading = "Entrar"
    document.getElementById("loadingS").innerText = btnloading;
    return false; // Encerra a função
}   

  
    try {
    const token = sessionStorage.getItem("token")
        const url = `https://script.google.com/macros/s/${encodeURIComponent(token)}/exec?action=Login&cpf=${encodeURIComponent(cpf)}&email=${encodeURIComponent(gmail)}`;
        const res = await fetch(url);
        const data = await res.json();
        
        if (!res.ok) {
    throw new Error(data.message || "Erro na API");
}

if (data.existe) {
  localStorage.setItem("alldados", JSON.stringify(""));
   sessionStorage.setItem("gmail", gmail);
   sessionStorage.setItem("cpf",cpf.replace(/\D/g, ""));
  const alldados = { 
    dados: {
    nome: data.dados.nome,
    codigo: data.dados.codigo,
    total: data.dados.total,
    saldo : data.dados.saldo,
    ganhosindicados: data.dados.ganhosindicados,
    liquido: data.dados.liquido,
    qntindi : data.dados.qntindi,
    meusacessos: data.dados.meusacessos,
    bancosdisponiveis: data.dados.bancosdisponiveis    }
  }
localStorage.setItem("alldados", JSON.stringify(alldados));


    window.location.href = "{% url 'home' %}";;
     btnloading = "Entrar"; // Melhor: document.getElementById("btnText").innerText = "Entrar";
     document.getElementById("loadings").innerText = btnloading;
    
} else {
    errorMessage.textContent = "Usuário não encontrado.";
    btnloading = "Entrar"; // Melhor: document.getElementById("btnText").innerText = "Entrar";
        document.getElementById("loadings").innerText = btnloading;

}
                  
    } catch (err) {
        console.error("Erro:", err);
        errorMessage.textContent = "Recarregue e tente novamente.";
    }
    return false;
    document.getElementById("loadings").innerText = btnloading;
    btnloading = "Entrar"
     
}


    function validateLogin(gmail, cpf) {
      const gmailValido = gmail.endsWith(".com");
      const cpfValido = cpf.replace(/\D/g, "").length === 11;
      return gmailValido && cpfValido;
    }
    
  </script>
</body>
</html>
